-- LocalScript

-- Função para criar uma GUI que persiste após a morte e é movível
local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Criação da ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoGrabGunGUI"
screenGui.ResetOnSpawn = false -- Mantém a GUI após a morte
screenGui.Parent = playerGui

-- Criação do Frame (fundo da GUI)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 200, 0, 100) -- Dimensões da GUI
frame.Position = UDim2.new(0.5, -100, 0.5, -50) -- Posição inicial (centralizada)
frame.BackgroundColor3 = Color3.fromRGB(0, 50, 100) -- Cor azul escura
frame.Active = true
frame.Draggable = true -- Permite que a GUI seja movida
frame.Parent = screenGui

-- Criação do botão de ativar/desativar
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 180, 0, 50)
button.Position = UDim2.new(0.5, -90, 0.5, -25) -- Centralizado no frame
button.BackgroundColor3 = Color3.fromRGB(0, 100, 200) -- Cor do botão
button.Text = "Ativar AutoGrab" -- Texto inicial
button.TextScaled = true
button.Parent = frame

-- Variável de controle do AutoGrab
local autoGrabEnabled = false

-- Função para ativar/desativar o AutoGrab
local function toggleAutoGrab()
    autoGrabEnabled = not autoGrabEnabled
    if autoGrabEnabled then
        button.Text = "Desativar AutoGrab"
        print("AutoGrab Ativado")
        -- Inicia o autograb
        startAutoGrab()
    else
        button.Text = "Ativar AutoGrab"
        print("AutoGrab Desativado")
        -- Para o autograb
        stopAutoGrab()
    end
end

-- Conecta o botão à função de alternância
button.MouseButton1Click:Connect(toggleAutoGrab)

-- Funções de controle do autograb
local grabbing = false
local grabLoop

-- Função para iniciar o autograb
function startAutoGrab()
    grabbing = true
    grabLoop = game:GetService("RunService").RenderStepped:Connect(function()
        if grabbing then
            local gunDrop = game.Workspace:FindFirstChild("GunDrop")
            local character = player.Character
            if gunDrop and character then
                -- Armazena a posição original
                local originalPosition = character.HumanoidRootPart.CFrame
                -- Teleporta para o "GunDrop"
                character.HumanoidRootPart.CFrame = gunDrop.CFrame
                wait(1)
                -- Retorna à posição original
                character.HumanoidRootPart.CFrame = originalPosition
            end
        end
    end)
end

-- Função para parar o autograb
function stopAutoGrab()
    grabbing = false
    if grabLoop then
        grabLoop:Disconnect()
    end
end
